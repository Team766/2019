/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */
plugins {
    // Apply the java plugin to add support for Java
    id 'java'

    // Apply the application plugin to add support for building a CLI application.
    id 'application'

    id "com.github.johnrengelman.shadow" version "5.2.0"
}

dependencies {
  implementation files('lib/natives/jsweep-1.3.0-natives.jar')
  implementation files('lib/jsweep-1.3.0.jar')
  implementation files('lib/jna-5.5.0.jar')
}

application {
  mainClassName = 'com.localizer.App'
}

// deploy and start localizer on pi
task deploy(type:Exec) {
  workingDir './src/resources/scripts'

  if (System.getProperty('os.name').toLowerCase(Locale.ROOT).contains('windows')) {
    commandLine 'cmd', '/c', 'deploy.bat'
  } else {
    commandLine 'sh', './deploy.sh'
  }
}